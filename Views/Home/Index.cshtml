@{
    ViewData["Title"] = "Home Page";
}

<div class="container">
    <div class="row-carousel row shadow rounded">
        <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="/images/carouselImages/p1.jpg" class="d-block w-100" style="height: 400px;" alt="Logo">
                    </div>
                 @*    <div class="carousel-item">
                        <img src="/images/carouselImages/pakwan2.jpg" class="d-block w-100" style="height: 400px;" alt="Pizza">
                    </div>
                    <div class="carousel-item">
                        <img src="/images/carouselimages/img3.jpg" class="d-block w-100" style="height: 400px;" alt="Pizza">
                    </div> *@
                </div>
            </div>

        </div>
        <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6">
            @* <div class="mb-3">
                <h2>
                    Get the Best Pizza From the best in the Market
                </h2>
            </div>
            <div class="mb-3 p-3">
                <span class="fs-5 text-dark">arabic ranch</span>
            </div>
            <div class="mb-3 p-3">
                <span class="fs-5 text-dark">arabic ranch</span>
            </div>
                        <div class="mb-3 p-3">
                <span class="fs-5 text-dark">arabic ranch</span>
            </div> *@
            <div class="text-center fs-5" style="margin-top: 20%;">
                <b>
                    "EventEats Quotify: Your Culinary Journey Begins Here"
                </b>
                <br />
                Explore a world of delightful flavors tailored for your events. From exquisite appetizers to mouthwatering main courses, we're here to make your occasions memorable.
                Join us and experience the convenience of online event food ordering and instant quotations. Your event, your way!
            </div>


        </div>
    </div>

  @*   <div class="row mt-3">
        <div class="col-lg-12 mb-3">
            <h2 class="text-dark fst-italic">
                Today's Special
            </h2>
            <div id="todaySpecial" class="row">
                <div class="col-sm-4 col-md-4 col-lg-4 col">
                    <div class="card dishCard">
                        <img class="card-img-top img-fluid" src="/images/carouselImages/pakwan1.png" alt="Karachi Pakwan House" style="height: 200px; object-fit: cover;" />
                        <div class="card-body">
                            <p class="card-title">Karachi Pakwan House</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-md-4 col-lg-4 col">
                    <div class="card dishCard">
                        <img class="card-img-top img-fluid" src="/images/carouselImages/pakwan3.jpg" alt="Delicious Pakwan" style="height: 200px; object-fit: cover;" />
                        <div class="card-body">
                            <p class="card-title">Delicious Pakwan</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 col-md-4 col-lg-4 col">
                    <div class="card dishCard">
                        <img class="card-img-top img-fluid" src="/images/carouselImages/pakwan4.jpg" alt="New Pakwan Center" style="height: 200px; object-fit: cover;" />
                        <div class="card-body">
                            <p class="card-title">New Pakwan Center</p>
                        </div>
                    </div>
                </div>

            </div>

          

        </div>
    </div>
 *@

    <div class="container">
        <div class="row mt-3">
            <div class="col-lg-12 mb-3">
                <h2 class="text-dark fst-italic">
                    Today's Special
                </h2>
                <div id="vendorCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner" id="vendorCards">
                        <!-- Dynamic vendor cards will be appended here -->
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#vendorCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#vendorCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>



</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Check if TempData contains the registration pending message
            var registrationPendingMessage = "@TempData["RegistrationPendingMessage"]";
            if (registrationPendingMessage) {
                // Display the popup message
                alert(registrationPendingMessage);
            }
        });
        function loadVendors() {
            $.ajax({
                url: '@Url.Action("Vendors", "Home")',
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    var vendorCardsContainer = $('#vendorCards');
                    vendorCardsContainer.empty();

                    if (data && data.length > 0) {
                        var carouselInner = $('<div class="carousel-inner"></div>');
                        var vendorsPerSlide = 3; // Number of vendors to display per slide
                        var totalSlides = Math.ceil(data.length / vendorsPerSlide);
                        var active = true;

                        for (var i = 0; i < totalSlides; i++) {
                            var slideStartIndex = i * vendorsPerSlide;
                            var slideEndIndex = Math.min((i + 1) * vendorsPerSlide, data.length);
                            var slideItems = data.slice(slideStartIndex, slideEndIndex);

                            var slideHtml = `
                                <div class="carousel-item ${active ? 'active' : ''}">
                                    <div class="row">`;

                            slideItems.forEach(function (vendor) {
                                var name = vendor.name || 'Name not available';
                                var address = vendor.shopAddress || 'Address not available';
                                var profilePicturePath = '';

                                if (vendor.profilePicture == null) {
                                    profilePicturePath = '/images/defaultimages/user.png';
                                } else {
                                    profilePicturePath = "data:image/png;base64," + vendor.profilePicture;
                                }

                                var cardHtml = `
                                    <div class="col-sm-4">
                                        <div class="card dishCard">
                                            <img class="card-img-top img-fluid" src="${profilePicturePath}" alt="${name}" style="height: 200px; object-fit: cover;" />
                                            <div class="card-body">
                                                <p class="card-title" style="font-size: 20px; font-weight: bold; color: #333;">${name}</p>
                                            </div>
                                        </div>
                                    </div>`;
                                slideHtml += cardHtml;
                            });

                            slideHtml += `</div></div>`;
                            carouselInner.append(slideHtml);
                            active = false;
                        }

                        vendorCardsContainer.append(carouselInner);
                    } else {
                        vendorCardsContainer.append('<p>No vendors found.</p>');
                    }
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                    alert('An error occurred while fetching vendors.');
                }
            });
        }


        $(document).ready(function () {
            loadVendors();
        });
    </script>
}